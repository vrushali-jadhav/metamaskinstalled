{"ast":null,"code":"var _jsxFileName = \"/Users/vrushalij/Desktop/Blockchain/HarshUpdated/evoting-react-auth/Frontend/src/loginForm.js\";\nimport React from 'react';\nimport renderHTML from 'react-render-html';\nimport inputFields from './inputFields';\nimport SubmitButton from './submitButton';\nimport UserStorage from './stores/UserStorage';\nimport { Link, Redirect } from 'react-router-dom';\nimport Register from './Register';\nimport swal from \"sweetalert2\";\nimport './App.css';\nimport InputFields from './inputFields';\nimport VoterContract from './VoterContract';\n\nvar CryptoJS = require(\"crypto-js\");\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      username: '',\n      password: '',\n      privatekey: '',\n      buttonDisabled: false\n    };\n  }\n\n  setInputValue(property, val) {\n    this.setState({\n      [property]: val\n    });\n  }\n\n  async doLogin() {\n    if (!this.state.username) return;\n    if (!this.state.password) return;\n    if (!this.state.privatekey) return;\n    this.setState({\n      buttonDisabled: true\n    });\n\n    try {\n      console.log(\"in dologin: \" + this.state.username);\n      console.log(\"passwrd: \" + this.state.password);\n      console.log(\"pk: \" + this.state.privatekey);\n      let res = await fetch('http://localhost:3003/login', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          username: this.state.username,\n          password: this.state.password\n        })\n      });\n      let result = await res.json();\n      console.log(\"result: \" + result);\n\n      if (result && result.success) {\n        // let redirectVar = null;\n        UserStorage.isLoggedIn = true;\n        UserStorage.username = result.username;\n        console.log(\"Log in successful..\"); //get voterid from SQL\n\n        let res = await fetch('http://localhost:3003/getVoterId', {\n          method: 'post',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            username: result.username\n          })\n        });\n        let result2 = await res.json();\n\n        if (result2 && result2.success) {\n          var id = result2.voterid;\n          console.log(\"Voter id: \" + id); //get user json from blockchain and decrypt using private key\n\n          const voter = await VoterContract.methods.getVoterInformation(id).call();\n          console.log(\"Got the voter from blockchain: \" + voter.hash);\n          console.log(\"Private key: \");\n          console.log(\"Private key: \" + this.state.privateKey);\n          var bytes = CryptoJS.AES.decrypt(voter.hash, this.state.privateKey.toString);\n          var voterinfo = bytes.toString(CryptoJS.enc.Utf8);\n          console.log(\"Decrypted text: \", voterinfo);\n          this.props.history.push({\n            pathname: \"/takephoto\",\n            state: {\n              voterinfo: voterinfo\n            }\n          });\n        } else {\n          swal.fire({\n            icon: 'error',\n            title: 'Login failed',\n            text: 'Voter ID not found in DB',\n            confirmButtonText: \"OK\"\n          });\n          this.props.history.push(\"/Login\");\n        }\n      } else if (result && result.success === false) {\n        swal.fire({\n          icon: 'error',\n          title: 'Login failed',\n          text: 'Username password did not match',\n          confirmButtonText: \"OK\"\n        });\n        this.props.history.push(\"/Login\");\n      } else {\n        console.log(\"nothing\");\n      }\n    } catch (e) {}\n  }\n\n  render() {\n    let redirectVar = null;\n\n    if (UserStorage.username) {\n      redirectVar = React.createElement(Redirect, {\n        to: \"/welcome\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"navbar-nav\",\n      id: \"navg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/RegisterInfo\",\n      className: \"nav-link reg\",\n      id: \"log\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, \" Register\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: \"/Login\",\n      className: \"nav-link\",\n      id: \"log\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, \" Login\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \" brand\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, \"Electronic\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \" colorb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Ballot\")))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"pitchline\",\n      id: \"pitch\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"Main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165\n      },\n      __self: this\n    }, \"Online election perfection!\"), React.createElement(\"div\", {\n      id: \"about\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166\n      },\n      __self: this\n    }, \"Our E-Voting solution is here for you.\"))), React.createElement(\"div\", {\n      className: \"maps\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"qoute\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"h3\",\n      className: \"since-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, \" Helping People Connect\", React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), \"Since 2020\", React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Security & Trust\"))), React.createElement(\"div\", {\n      className: \"logindetails\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Enter credentials\", React.createElement(InputFields, {\n      type: \"text\",\n      placeholder: \"Username\",\n      value: this.state.username ? this.state.username : '',\n      onChange: val => this.setInputValue('username', val),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }), React.createElement(InputFields, {\n      type: \"password\",\n      placeholder: \"Password\",\n      value: this.state.password ? this.state.password : '',\n      onChange: val => this.setInputValue('password', val),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }), React.createElement(InputFields, {\n      type: \"text\",\n      placeholder: \"Metamask account private key\",\n      value: this.state.privatekey ? this.state.privatekey : '',\n      onChange: val => this.setInputValue('privatekey', val),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    }), React.createElement(SubmitButton, {\n      text: \"Login\",\n      disabled: this.state.buttonDisabled,\n      onClick: () => this.doLogin(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"reviews\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"reviewtitle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \" h3 titlemessage\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \" Straight from the horses mouth! \"), React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"ElectronicBallot has been rated 4.8 out of 5 stars with 430000+ reviews\")), React.createElement(\"div\", {\n      className: \"col-md-4 customer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"photoandstar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"custname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, \"Vrushali\"), React.createElement(\"div\", {\n      className: \"custphoto1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"stars\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"review\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, \"When nothing else worked, ElectronicBallot came to the rescue.\")), React.createElement(\"div\", {\n      className: \"col-md-4 customer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"photoandstar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"custname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, \"Nistha\"), React.createElement(\"div\", {\n      className: \"custphoto2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"stars\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"review\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"Easy and hassle free.\")), React.createElement(\"div\", {\n      className: \"col-md-4 customer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"photoandstar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"custname\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, \"Aditya\"), React.createElement(\"div\", {\n      className: \"custphoto3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"stars\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"fa fa-star checked\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"review\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"ElectronicBallot has reduced the voting time by 90%.\")))));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/Users/vrushalij/Desktop/Blockchain/HarshUpdated/evoting-react-auth/Frontend/src/loginForm.js"],"names":["React","renderHTML","inputFields","SubmitButton","UserStorage","Link","Redirect","Register","swal","InputFields","VoterContract","CryptoJS","require","LoginForm","Component","constructor","props","state","username","password","privatekey","buttonDisabled","setInputValue","property","val","setState","doLogin","console","log","res","fetch","method","headers","body","JSON","stringify","result","json","success","isLoggedIn","result2","id","voterid","voter","methods","getVoterInformation","call","hash","privateKey","bytes","AES","decrypt","toString","voterinfo","enc","Utf8","history","push","pathname","fire","icon","title","text","confirmButtonText","e","render","redirectVar"],"mappings":"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","sourcesContent":["import React from 'react';\nimport renderHTML from 'react-render-html';\nimport inputFields from './inputFields';\nimport SubmitButton from './submitButton';\nimport UserStorage from './stores/UserStorage';\nimport { Link, Redirect } from 'react-router-dom';\nimport Register from './Register';\nimport swal from \"sweetalert2\";\nimport './App.css';\nimport InputFields from './inputFields';\nimport VoterContract from './VoterContract';\nvar CryptoJS = require(\"crypto-js\");\n\nclass LoginForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: '',\n            password: '',\n            privatekey: '',\n            buttonDisabled: false\n        }\n    }\n\n    setInputValue(property, val) {\n        this.setState({\n            [property]: val\n        })\n    }\n\n    async doLogin() {\n        if (!this.state.username)\n            return;\n        if (!this.state.password)\n            return;\n        if (!this.state.privatekey)\n            return;\n        this.setState({\n            buttonDisabled: true\n        })\n \n        try {\n            console.log(\"in dologin: \" +this.state.username);\n            console.log(\"passwrd: \" +this.state.password);\n            console.log(\"pk: \" +this.state.privatekey);\n            let res = await fetch('http://localhost:3003/login', {\n                method: 'post',\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    username: this.state.username,\n                    password: this.state.password,\n                })\n            });\n            \n            let result = await res.json();\n            console.log(\"result: \"+result);\n\n            if (result && result.success) {\n                // let redirectVar = null;\n                UserStorage.isLoggedIn = true;\n                UserStorage.username = result.username;\n                \n                console.log(\"Log in successful..\");\n\n                //get voterid from SQL\n                let res = await fetch('http://localhost:3003/getVoterId', {\n                    method: 'post',\n                    headers: {\n                        'Accept': 'application/json',\n                        'Content-Type': 'application/json'\n                    },\n                    body: JSON.stringify({\n                        username: result.username,\n                    })\n                });\n\n                let result2 = await res.json();\n                if (result2 && result2.success){\n                    var id = result2.voterid;\n                    console.log(\"Voter id: \" + id);\n                \n                    //get user json from blockchain and decrypt using private key\n                    const voter = await VoterContract.methods.getVoterInformation(id).call();\n                    console.log(\"Got the voter from blockchain: \"+voter.hash);\n                    console.log(\"Private key: \");\n                    console.log(\"Private key: \"+this.state.privateKey);\n                    var bytes  = CryptoJS.AES.decrypt(voter.hash, this.state.privateKey.toString);\n                    var voterinfo = bytes.toString(CryptoJS.enc.Utf8);\n                    console.log(\"Decrypted text: \", voterinfo);\n                    \n                    this.props.history.push({\n                        pathname: \"/takephoto\",\n                        state: {\n                            voterinfo: voterinfo\n                        }\n                    });\n                }\n                else{\n                    swal.fire({\n                        icon: 'error',\n                        title: 'Login failed',\n                        text: 'Voter ID not found in DB',\n                        confirmButtonText: \"OK\"\n                    });\n                    this.props.history.push(\"/Login\");\n                }\n            }\n\n            else if (result && result.success === false) {\n                swal.fire({\n                    icon: 'error',\n                    title: 'Login failed',\n                    text: 'Username password did not match',\n                    confirmButtonText: \"OK\"\n                });\n                this.props.history.push(\"/Login\");\n            }\n\n            else{\n                console.log(\"nothing\");\n            }\n        }\n        catch (e) {\n\n        }\n    }\n\n    render() {\n        let redirectVar = null;\n        if (UserStorage.username) {\n            redirectVar = <Redirect to=\"/welcome\" />\n        }\n        return (\n\n\n            <div className='container'>\n                {/* {redirectVar} */}\n                {/* <div className=\"body\"> */}\n                <div className=\"header\">\n                    <ul className=\"navbar-nav\" id=\"navg\">\n                        <li className=\"nav-item\">\n                            <Link to=\"/RegisterInfo\" className=\"nav-link reg\" id=\"log\"> Register\n                    </Link>\n                        </li>\n                        <li className=\"nav-item\">\n                            <Link to=\"/Login\" className=\"nav-link\" id=\"log\"> Login\n                    </Link>\n                        </li>\n                        {/* <li className=\"nav-item\">\n                        <a className=\"nav-link active\" id=\"hom\" >Home</a>\n                    </li> */}\n                        <li className=\"nav-item\">\n                            <a className=\" brand\">Electronic</a>\n                        </li>\n                        <li className=\"nav-item\">\n                            <a className=\" colorb\">Ballot</a>\n                        </li>\n                    </ul>\n                </div>\n                <div className=\"row\">\n                    <div className=\"pitchline\" id=\"pitch\">\n                        <div id=\"Main\">Online election perfection!</div>\n                        <div id=\"about\">Our E-Voting solution is here for you.</div>\n                    </div>\n                </div>\n\n                <div className=\"maps\"></div>\n                <div className=\"qoute\">\n                    <div className=\"h3\" className=\"since-title\"> Helping People Connect\n                    <br></br>Since 2020\n                    <p>Security & Trust</p>\n                    </div>\n                </div>\n                <div className=\"logindetails\">Enter credentials\n                    <InputFields type='text' placeholder='Username'\n                        value={this.state.username ? this.state.username : ''}\n                        onChange={(val) => this.setInputValue('username', val)}\n                    />\n                    <InputFields type='password' placeholder='Password'\n                        value={this.state.password ? this.state.password : ''}\n                        onChange={(val) => this.setInputValue('password', val)}\n                    />\n                    <InputFields type='text' placeholder='Metamask account private key'\n                        value={this.state.privatekey ? this.state.privatekey : ''}\n                        onChange={(val) => this.setInputValue('privatekey', val)}\n                    />\n                    <SubmitButton\n                        text='Login'\n                        disabled={this.state.buttonDisabled}\n                        onClick={() => this.doLogin()}\n                    />\n                </div>\n\n                <div className=\"row\">\n                    < div className=\"reviews\">\n                        <div className=\"reviewtitle\">\n                            <div className=\" h3 titlemessage\"> Straight from the horses mouth! </div>\n                            <span></span>\n                            <p>ElectronicBallot has been rated 4.8 out of 5 stars with 430000+ reviews</p>\n                        </div>\n                        <div className=\"col-md-4 customer\">\n                            <div className=\"photoandstar\">\n                                <div className=\"custname\">Vrushali</div>\n                                <div className=\"custphoto1\"></div>\n                                <div className=\"stars\">\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                </div>\n                            </div>\n                            <div className=\"review\">\n                                When nothing else worked, ElectronicBallot came to the rescue.\n                </div>\n                        </div>\n                        <div className=\"col-md-4 customer\">\n                            <div className=\"photoandstar\">\n                                <div className=\"custname\">Nistha</div>\n                                <div className=\"custphoto2\"></div>\n                                <div className=\"stars\">\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                </div>\n                            </div>\n                            <div className=\"review\">\n                                Easy and hassle free.\n                </div>\n                        </div>\n                        <div className=\"col-md-4 customer\">\n                            <div className=\"photoandstar\">\n                                <div className=\"custname\">Aditya</div>\n                                <div className=\"custphoto3\"></div>\n                                <div className=\"stars\">\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                    <span className=\"fa fa-star checked\"></span>\n                                </div>\n                            </div>\n                            <div className=\"review\">\n                                ElectronicBallot has reduced the voting time by 90%.\n                </div>\n                        </div>\n                    </div>\n                </div>\n                {/* </div> */}\n            </div>\n\n        );\n    }\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}