{"ast":null,"code":"var _jsxFileName = \"/Users/vrushalij/Desktop/Submission/css_updated/Frontend/src/CandidateList.js\";\nimport React, { Component } from \"react\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport web3 from './web3';\nimport { Button, Modal } from 'react-bootstrap';\nimport VoterContract from './VoterContract';\nimport './camp.css';\nimport classnames from 'classnames';\nimport { Card, Icon, Image } from 'semantic-ui-react';\nimport Listing from './Listing';\n\nclass CandidateList extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      candidates: [],\n      candidates2: [],\n      first_name: \"\",\n      last_name: \"\",\n      candidate_info: \"\",\n      candidate_desc: \"\",\n      voteCount: \"\",\n      showmodel: false\n    };\n    this.onChange = this.onChange.bind(this); //this.showmodel =this.showmodel(this);\n  }\n\n  showmodel() {\n    this.setState({\n      showmodel: true // profile: this.props.getProfile\n\n    });\n    console.log(this.state.showmodel);\n  }\n\n  doLogout() {\n    //UserStorage.username='';\n    this.props.history.push(\"/Login\");\n  }\n\n  hidemodel() {\n    this.setState({\n      showmodel: false // profile: this.props.getProfile\n\n    });\n  }\n\n  componentDidMount() {\n    //debugger\n    axios.get(`http://localhost:3003/candidatelist`).then(response => {\n      //debugger\n      console.log(\"response.data\", response.data.data); //console.log(response.data.candidates[0]);\n      //console.log(response.data.candidates[1]);\n\n      this.setState({\n        candidates: response.data.data // profile: this.props.getProfile\n\n      });\n      console.log(\"candidates from state\" + this.state.candidates);\n    });\n  }\n\n  onChange(e) {\n    // debugger\n    //    e.preventDefault();\n    // console.log( e.target.value);\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  }\n\n  async settleElection() {}\n\n  async handleAddCandidate(e) {\n    //  e.preventDefault();\n    try {\n      let res = await fetch('http://localhost:3003/newcandidate', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          first_name: this.state.first_name,\n          last_name: this.state.last_name,\n          candidate_info: this.state.candidate_info,\n          candidate_desc: this.state.candidate_desc,\n          voteCount: 0\n        })\n      });\n      let result = await res.json();\n      console.log(\"response from db: \", result);\n\n      if (result && result.success) {\n        //send information to blockchain\n        console.log(\"Voterid is : \" + result.candidate_id); //creating fake file\n\n        var id = result.candidate_id;\n        var firstname = this.state.first_name;\n        var lastname = this.state.last_name;\n        var info = this.state.candidate_info;\n        var desc = this.state.candidate_desc;\n        var voteCount = 0;\n        var accounts = await web3.eth.getAccounts();\n        console.log(\"web3\", accounts);\n        console.log(\"aing: \" + accounts[0]);\n        web3.eth.defaultAccount = accounts[0];\n        console.log(id); //console.log(candidatedetails);\n        //debugger\n\n        await VoterContract.methods.addCandidate(id, firstname.toString(), lastname.toString(), info.toString(), desc.toString()).send({\n          from: accounts[0]\n        }); //await VoterContract.methods.addCandidate(1,\"harsh\",\"agrawal\",\"hello\",\"hello\").send({from: accounts[0]});\n        // //debugger\n\n        console.log(\"Candidate Stored on blockchain..\");\n        const candidate = await VoterContract.methods.getCandidateInformation(id).call();\n        console.log(\"Got the candidate information from blockchain: \" + candidate); //document.getElementById('addcandidate-close').click()\n\n        this.hidemodel();\n        swal.fire({\n          icon: 'success',\n          title: 'Congratulations!',\n          text: 'Candidate stored on blockchain',\n          confirmButtonText: \"OK\"\n        }).then(result => {\n          if (result.value) {\n            window.location.reload();\n          }\n        });\n        this.props.history.push(\"/candidatelist\");\n      } else if (result && result.success === false) {\n        console.log(\"Add candidate failed \");\n        swal.fire({\n          icon: 'error',\n          title: 'Failed to store candidate data in database',\n          text: 'Try Again',\n          confirmButtonText: \"OK\"\n        });\n        this.props.history.push(\"/adminlogin\");\n      }\n    } catch (e) {} //await this.props.handleAddEducation(newprofile);\n\n  }\n\n  render() {\n    //debugger\n    const columnClasses = classnames('column', 'col-4', 'col-xs-12');\n    const cardClasses = classnames('card');\n    let loopcandidate = this.state.candidates.map((candidate1, i) => {\n      return React.createElement(\"div\", {\n        className: \"coloumns\",\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: columnClasses,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        className: \"profileimg\",\n        src: \"https://react.semantic-ui.com/images/avatar/large/matthew.png\",\n        alt: \"avatar\",\n        style: {\n          width: '200px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      })), React.createElement(Card.Content, {\n        class: \"textcan\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(Card.Header, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, candidate1.first_name, \" \", candidate1.last_name), React.createElement(Card.Meta, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, candidate1.candidate_info), React.createElement(Card.Description, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, candidate1.candidate_desc)), React.createElement(Card.Content, {\n        extra: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        name: \"user\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }), \"Running For President\")))));\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(Modal, {\n      show: this.state.showmodel,\n      onHide: () => this.hidemodel(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, React.createElement(Modal.Header, {\n      closeButton: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(Modal.Title, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, \"Add Candidate\")), React.createElement(Modal.Body, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      required: true,\n      className: \"candinfo\",\n      placeholder: \"First Name\",\n      name: \"first_name\",\n      value: this.state.first_name,\n      onChange: this.onChange,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      required: true,\n      className: \"candinfo\",\n      placeholder: \"Last Name\",\n      name: \"last_name\",\n      value: this.state.last_name,\n      onChange: this.onChange,\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      required: true,\n      className: \"candinfo\",\n      placeholder: \"Any political experience?\",\n      name: \"candidate_info\",\n      type: \"text\",\n      value: this.state.candidate_info,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      required: true,\n      className: \"candinfo\",\n      placeholder: \"Add a short description\",\n      name: \"candidate_desc\",\n      value: this.state.candidate_desc,\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }))))), React.createElement(Modal.Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"rg addcandi\",\n      id: \"rg\",\n      onClick: () => this.handleAddCandidate(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, \"Add\"))), React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      className: \"navbar-nav\",\n      id: \"navg\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \" brand\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    }, \"Electronic\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"colorb\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, \"Ballot\")), React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"btnlogout\",\n      type: \"button\",\n      onClick: () => this.doLogout(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, \"Logout \")))), React.createElement(\"section\", {\n      className: \"mycard\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, React.createElement(\"header\", {\n      className: \"applicantheader\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"ul\", {\n      id: \"setcamp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"nav-item\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"camp\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, \"Presidential Elections 2020\"), React.createElement(\"button\", {\n      className: \"btnsettle\",\n      type: \"button\",\n      onClick: () => this.settleElection(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, \"Settle Election\"), React.createElement(\"button\", {\n      className: \"btn can\",\n      type: \"button\",\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#addcandidate\",\n      onClick: () => this.showmodel(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, \"Add Candidate\")))), React.createElement(\"div\", {\n      className: \"columns\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, loopcandidate))));\n  }\n\n} //Export The Main Component\n\n\nexport default CandidateList;","map":{"version":3,"sources":["/Users/vrushalij/Desktop/Submission/css_updated/Frontend/src/CandidateList.js"],"names":["React","Component","axios","swal","web3","Button","Modal","VoterContract","classnames","Card","Icon","Image","Listing","CandidateList","constructor","props","state","candidates","candidates2","first_name","last_name","candidate_info","candidate_desc","voteCount","showmodel","onChange","bind","setState","console","log","doLogout","history","push","hidemodel","componentDidMount","get","then","response","data","e","target","name","value","settleElection","handleAddCandidate","res","fetch","method","headers","body","JSON","stringify","result","json","success","candidate_id","id","firstname","lastname","info","desc","accounts","eth","getAccounts","defaultAccount","methods","addCandidate","toString","send","from","candidate","getCandidateInformation","call","fire","icon","title","text","confirmButtonText","window","location","reload","render","columnClasses","cardClasses","loopcandidate","map","candidate1","i","width"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport web3 from './web3';\nimport { Button, Modal } from 'react-bootstrap';\nimport VoterContract from './VoterContract';\nimport './camp.css';\nimport classnames from 'classnames'\nimport { Card, Icon, Image } from 'semantic-ui-react';\nimport Listing from './Listing';\n\nclass CandidateList extends Component {\n    constructor(props){\n    super(props);\n    this.state= {\n        candidates:[],\n        candidates2:[],\n        first_name:\"\",\n        last_name:\"\",\n        candidate_info:\"\",\n        candidate_desc:\"\",\n        voteCount:\"\",\n        showmodel:false\n    };\n   this.onChange = this.onChange.bind(this);\n    //this.showmodel =this.showmodel(this);\n}\nshowmodel(){\n    this.setState({\n        showmodel: true\n        // profile: this.props.getProfile\n    });\n    console.log(this.state.showmodel);\n}\n\ndoLogout(){\n    //UserStorage.username='';\n    this.props.history.push(\"/Login\");\n}\n\nhidemodel(){\n    this.setState({\n        showmodel: false\n        // profile: this.props.getProfile\n    });\n}\n     componentDidMount(){\n        //debugger\n\n         axios.get(`http://localhost:3003/candidatelist`)\n        .then((response) => {\n            //debugger\n            console.log(\"response.data\", response.data.data);\n            //console.log(response.data.candidates[0]);\n            //console.log(response.data.candidates[1]);\n            \n            this.setState({\n                candidates: response.data.data,\n                // profile: this.props.getProfile\n            });\n            console.log(\"candidates from state\"+ this.state.candidates);\n            \n        });\n        \n    }\n\n    onChange(e) {\n        // debugger\n    //    e.preventDefault();\n    // console.log( e.target.value);\n    this.setState({ [e.target.name]: e.target.value });\n    }\n\n    async settleElection()\n    {\n\n    }\n\n    async handleAddCandidate(e){\n        //  e.preventDefault();\n    try {\n        let res = await fetch('http://localhost:3003/newcandidate', {\n            method: 'post',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                first_name:this.state.first_name,\n                last_name:this.state.last_name,\n                candidate_info:this.state.candidate_info,\n                candidate_desc:this.state.candidate_desc,\n                voteCount:0\n            })\n        });\n        \n        let result = await res.json();\n        console.log(\"response from db: \", result);\n\n        if (result && result.success) {\n            //send information to blockchain\n            console.log(\"Voterid is : \"+result.candidate_id);\n            //creating fake file\n             \n                var id = result.candidate_id;\n                var firstname= this.state.first_name;\n                var lastname =this.state.last_name;\n                var info=this.state.candidate_info;\n                var desc=this.state.candidate_desc;\n                var voteCount=0\n           \n\n            var accounts = await web3.eth.getAccounts();\n            console.log(\"web3\", accounts);\n            console.log(\"aing: \"+ accounts[0]);\n            web3.eth.defaultAccount = accounts[0];\n            console.log(id);\n            //console.log(candidatedetails);\n            //debugger\n            await VoterContract.methods.addCandidate(id, firstname.toString(),lastname.toString(),\n             info.toString(),desc.toString()).send({from: accounts[0]});\n            //await VoterContract.methods.addCandidate(1,\"harsh\",\"agrawal\",\"hello\",\"hello\").send({from: accounts[0]});\n            // //debugger\n            console.log(\"Candidate Stored on blockchain..\");\n            const candidate = await VoterContract.methods.getCandidateInformation(id).call();\n            console.log(\"Got the candidate information from blockchain: \"+candidate);\n            //document.getElementById('addcandidate-close').click()\n            this.hidemodel();\n\n            swal.fire({\n                icon: 'success',\n                title: 'Congratulations!',\n                text: 'Candidate stored on blockchain',\n                confirmButtonText: \"OK\"\n            }).then((result) => {\n                if (result.value) {\n                    window.location.reload();\n                }\n              })\n         \n            this.props.history.push(\"/candidatelist\");\n        }\n\n        else if (result && result.success === false) {\n            console.log(\"Add candidate failed \")\n            swal.fire({\n                icon: 'error',\n                title: 'Failed to store candidate data in database',\n                text: 'Try Again',\n                confirmButtonText: \"OK\"\n            });\n\n            this.props.history.push(\"/adminlogin\");\n        }\n    }\n    catch (e) {\n\n    }\n        //await this.props.handleAddEducation(newprofile);\n    }\n    \n    render() {\n        //debugger\n        const columnClasses = classnames('column', 'col-4', 'col-xs-12')\n        const cardClasses = classnames('card')\n\n        let loopcandidate = this.state.candidates.map((candidate1, i) => {\n            return (\n        <div className=\"coloumns\" key={i}>\n            <div className={columnClasses}>\n                    <Card>\n                        <div >\n                         <img className=\"profileimg\" src='https://react.semantic-ui.com/images/avatar/large/matthew.png' alt=\"avatar\" style={{width:'200px'}} />\n                         <span ></span>                \n                         </div>\n                        <Card.Content class=\"textcan\">\n                            <Card.Header>{candidate1.first_name} {candidate1.last_name}</Card.Header>\n                            <Card.Meta>\n                            {candidate1.candidate_info}\n                            </Card.Meta>\n                            <Card.Description>\n                            {candidate1.candidate_desc}\n                        </Card.Description>\n                        </Card.Content>\n                        <Card.Content extra>\n                            <a>\n                                <Icon name='user' />\n                            Running For President\n                            </a>\n                        </Card.Content>\n                    </Card>\n                    </div>           \n                </div>\n            )\n        })\n        return (\n            <div>\n              \n <Modal show={this.state.showmodel} onHide={() => this.hidemodel()}>\n                <Modal.Header closeButton>\n                <Modal.Title>Add Candidate</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                <div className=\"row\">\n                    <div>\n                        <div >\n                            <div>\n                                <input required className=\"candinfo\" placeholder=\"First Name\"name= \"first_name\" \n                                value={this.state.first_name} onChange={this.onChange} type=\"text\" />\n                            </div>\n                        </div>\n                        <div >\n                            <div>\n                                <input required className=\"candinfo\" placeholder=\"Last Name\" name= \"last_name\" \n                                value={this.state.last_name} onChange={this.onChange}type=\"text\" />\n                            </div>\n                        </div>\n                        <div >\n                            <input required className=\"candinfo\" placeholder=\"Any political experience?\" name =\"candidate_info\" \n                            type=\"text\" value={this.state.candidate_info} onChange={this.onChange} />\n                        </div>\n                        <div>\n                            <textarea required className=\"candinfo\"  placeholder=\"Add a short description\" name = \"candidate_desc\" \n                            value={this.state.candidate_desc} onChange={this.onChange}  >\n                            </textarea>\n                        </div>\n                    </div>\n                </div>\n                </Modal.Body>\n          \n                <Modal.Footer>\n                <button className=\"rg addcandi\" id=\"rg\" onClick={() => this.handleAddCandidate()}>Add</button>\n                </Modal.Footer>\n                </Modal> \n\n\n\n            <div className=\"container\">\n            <div className= \"header\">\n                        <ul className=\"navbar-nav\" id=\"navg\">\n                            <li className=\"nav-item\">\n                                <a className=\" brand\">Electronic</a>\n                            </li>\n                            <li className=\"nav-item\">\n                                <a className=\"colorb\">Ballot</a>\n                            </li>\n                            <li className=\"nav-item\">\n                            <button className=\"btnlogout\" type=\"button\"  onClick={() => this.doLogout()} >Logout </button>\n                            </li>\n                        </ul>\n                    </div>\n\n                <section className=\"mycard\">\n                    <header className=\"applicantheader\">\n                    <ul id=\"setcamp\">\n                    <li className=\"nav-item\">\n                        <h3 className=\"camp\" >\n                            Presidential Elections 2020 \n                        </h3>     \n                        <button className=\"btnsettle\" type=\"button\" onClick={() => this.settleElection()} >Settle Election</button>\n                        <button className=\"btn can\" type=\"button\" data-toggle=\"modal\" data-target=\"#addcandidate\" onClick={() => this.showmodel()} >Add Candidate</button>\n                    </li>\n                    </ul>\n                    </header>\n                    <div className=\"columns\">\n                        {loopcandidate}\n                    </div>\n                </section>\n            </div>\n</div>\n\n\n        );\n    }\n}\n\n//Export The Main Component\nexport default CandidateList;"]},"metadata":{},"sourceType":"module"}